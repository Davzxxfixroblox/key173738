<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Debug Davzx</title>
    <style>
        body { background-color: #000; color: white; font-family: monospace; padding: 20px; text-align: center; }
        .box { border: 1px solid white; padding: 10px; margin: 10px; word-break: break-all; }
        .certo { color: #00ff00; }
        .errado { color: #ff0000; }
    </style>
</head>
<body>
    <h2>MODO DE DIAGNÓSTICO</h2>
    
    <p>O link que chegou aqui foi:</p>
    <div class="box" id="urlDisplay">...</div>

    <p>O Status da verificação é:</p>
    <h3 id="status">...</h3>

    <script>
        // Mostra a URL completa que o navegador recebeu
        document.getElementById("urlDisplay").innerText = window.location.href;

        // Tenta pegar o token
        const urlParams = new URLSearchParams(window.location.search);
        const token = urlParams.get('auth');

        const SENHA_CORRETA = "verificado";

        if (token === SENHA_CORRETA) {
            document.getElementById("status").innerText = "✅ SUCESSO! A SENHA CHEGOU.";
            document.getElementById("status").className = "certo";
            
            // Se deu certo, redireciona em 3 segundos para testar
            const d = new Date();
            const code = (d.getUTCDate() * 1024) + ((d.getUTCMonth() + 1) * 512) + d.getUTCFullYear();
            setTimeout(() => {
                window.location.href = "index.html?validacao=" + code;
            }, 3000);

        } else {
            document.getElementById("status").innerText = "❌ ERRO! A URL NÃO TEM '?auth=verificado'";
            document.getElementById("status").className = "errado";
            document.body.innerHTML += "<p>Vá no EncurtaNet e verifique o link de destino.</p>";
        }
    </script>
</body>
</html>
